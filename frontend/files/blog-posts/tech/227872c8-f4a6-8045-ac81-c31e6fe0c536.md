
## æ¦‚è¦


Goæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®`net/http`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã€3ã¤ã®ç°¡å˜ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã€‚

- `/hello` : å›ºå®šã®æ–‡å­—åˆ—ã‚’è¿”ã™GETã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `/echo` : å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™POSTã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `/json` : JSONå½¢å¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™GETã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰


```go
package main

import (
	"encoding/json"
	"fmt"
	"io"
	"net/http"
)

// GET /hello
func helloHandler(w http.ResponseWriter, r *http.Request) {
	if r.Method != http.MethodGet {
		http.Error(w, "Method Not Allowed", http.StatusMethodNotAllowed)
		return
	}
	fmt.Fprintln(w, "Hello, World!")
}

// POST /echo
func echoHandler(w http.ResponseWriter, r *http.Request) {
	if r.Method != http.MethodPost {
		http.Error(w, "Method Not Allowed", http.StatusMethodNotAllowed)
		return
	}

	body, err := io.ReadAll(r.Body)
	if err != nil {
		http.Error(w, "Failed to read body", http.StatusInternalServerError)
		return
	}
	defer r.Body.Close()

	w.Write(body)
}

// GET /json
func jsonHandler(w http.ResponseWriter, r *http.Request) {
	if r.Method != http.MethodGet {
		http.Error(w, "Method Not Allowed", http.StatusMethodNotAllowed)
		return
	}

	// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”¨ã®æ§‹é€ ä½“
	type Response struct {
		Message string `json:"message"`
		Status  string `json:"status"`
	}

	resp := Response{
		Message: "Hello, JSON!",
		Status:  "success",
	}

	// JSONãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ã‚»ãƒƒãƒˆ
	w.Header().Set("Content-Type", "application/json")

	// JSONã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹
	if err := json.NewEncoder(w).Encode(resp); err != nil {
		http.Error(w, "Failed to encode JSON", http.StatusInternalServerError)
	}
}

func main() {
	http.HandleFunc("/hello", helloHandler)
	http.HandleFunc("/echo", echoHandler)
	http.HandleFunc("/json", jsonHandler)

	fmt.Println("ğŸš€ ã‚µãƒ¼ãƒãƒ¼èµ·å‹•: http://localhost:8080")
	http.ListenAndServe(":8080", nil)
}

```


## è§£èª¬

- **http.HandleFunc**

	â†’ ç‰¹å®šã®ãƒ‘ã‚¹ã«ãƒãƒ³ãƒ‰ãƒ©é–¢æ•°ã‚’ç´ä»˜ã‘ã‚‹ã€‚

- **http.ListenAndServe**

	â†’ æŒ‡å®šã®ãƒãƒ¼ãƒˆã§HTTPã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã€‚

- **r.Method**

	â†’ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®HTTPãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆGET / POST ãªã©ï¼‰ã‚’å–å¾—ã—ã€é©åˆ‡ãªå‡¦ç†ã‚’åˆ†å²ã™ã‚‹ã€‚

- **io.ReadAll(r.Body)**

	â†’ ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®å†…å®¹ã‚’ã™ã¹ã¦èª­ã¿è¾¼ã‚€ã€‚

- **w.Header().Set("Content-Type", "application/json")**

	â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã«Content-Typeã‚’æŒ‡å®šã™ã‚‹ã€‚

- **json.NewEncoder(w).Encode(æ§‹é€ ä½“)**

	â†’ æ§‹é€ ä½“ã®å†…å®¹ã‚’JSONå½¢å¼ã«å¤‰æ›ã—ã€ãã®ã¾ã¾ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã™ã€‚

